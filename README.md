# Lesson_OD04. Анализ сложности алгоритмов.

---

## Кейс из урока TG06 [(ссылка на кейс)](https://github.com/EduardIbatullin/Lesson_TG06/blob/main/README.md)

---

# Финансовый помощник

## Описание проекта

"Финансовый помощник" — это Telegram-бот, разработанный на основе фреймворка `aiogram`. Бот предназначен для управления личными финансами, получения актуальных курсов валют и предоставления советов по экономии. Основные функции бота включают регистрацию пользователей, управление категориями расходов, запросы к API для получения курсов валют и предоставление случайных советов по экономии.

## Основные функции

- **Регистрация пользователя**: Бот позволяет пользователям регистрироваться, сохраняя их Telegram ID и имя пользователя в базе данных SQLite.
- **Управление личными финансами**: Пользователь может вводить свои расходы по категориям, которые сохраняются в базе данных для последующего анализа.
- **Получение курса валют**: Бот может запрашивать актуальные курсы валют через API и предоставлять пользователю информацию о курсе USD и EUR по отношению к RUB.
- **Советы по экономии**: Бот предоставляет случайные советы по экономии средств, что помогает пользователю улучшить финансовую дисциплину.

## Структура проекта

- `hw_OD04.py`: Основной файл для запуска бота. Содержит инициализацию бота и диспетчера, а также запуск основного процесса.
- `config.py`: Загружает конфигурационные переменные из окружения (.env файл).
- `exchange.py`: Содержит логику для запроса курса валют через API.
- `finances.py`: Обрабатывает команды, связанные с управлением личными финансами и категориями расходов.
- `handlers.py`: Основной роутер, объединяющий все обработчики команд и сообщений.
- `keyboard.py`: Создает клавиатуру с основными командами для взаимодействия с ботом.
- `registration.py`: Управляет процессом регистрации пользователя в базе данных.
- `tips.py`: Предоставляет случайные советы по экономии.

## Анализ сложности (Big O Notation)

### Регистрация пользователя (`registration.py`)
1. **Поиск пользователя в базе данных**:
   - Сложность: `O(n)` в худшем случае, так как необходимо выполнить линейный поиск в таблице `users`.
2. **Вставка данных**:
   - Сложность: `O(1)` в среднем случае при условии наличия индекса на `telegram_id`, что обеспечивает быструю вставку. Однако, если индекса нет или вставка вызывает перестроение таблицы, сложность может возрасти до `O(n)`.

### Управление личными финансами (`finances.py`)
1. **Переходы между состояниями**:
   - Сложность: `O(1)` для каждого перехода между состояниями (например, от `category_1` к `expenses_1`), так как это просто обновление текущего состояния в `FSMContext`.
2. **Операции с базой данных**:
   - Сложность: `O(1)` в среднем для вставки данных в таблицу при наличии индекса. В худшем случае сложность может достигать `O(n)`.

### Получение курса валют (`exchange.py`)
1. **Запрос к API**:
   - Сложность: `O(1)`, так как запрос выполняется фиксированное количество раз с фиксированным объемом данных.
2. **Парсинг JSON**:
   - Сложность: `O(1)`, так как парсинг выполняется для фиксированной структуры данных.

### Советы по экономии (`tips.py`)
1. **Выбор случайного совета**:
   - Сложность: `O(1)`, так как выбор случайного элемента из списка с фиксированным количеством элементов выполняется за постоянное время.

### Главный роутер (`handlers.py`)
1. **Включение роутеров**:
   - Сложность: `O(1)`, так как каждый роутер подключается один раз при инициализации.

### Создание клавиатуры (`keyboard.py`)
1. **Создание клавиатуры**:
   - Сложность: `O(1)`, так как создание клавиатуры с фиксированным числом кнопок занимает постоянное время.

## Заключение

Проект "Финансовый помощник" характеризуется в основном низкой сложностью алгоритмов с оценкой `O(1)` для большинства операций. Основные места, где сложность может возрастать до `O(n)`, связаны с взаимодействием с базой данных SQLite, особенно при выполнении поиска и вставки данных. Эти аспекты требуют особого внимания при масштабировании проекта или увеличении объема данных.

